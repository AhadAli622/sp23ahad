<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>{% block title %}LearnPath{% endblock %}</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Fonts & Icons -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
  <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animation.min.css"/>

  <style>
    :root {
      --primary: #635bff; --accent: #8b5cf6; --pink: #ec4899;
      --gradient: linear-gradient(135deg, #635bff, #8b5cf6, #ec4899);
      --bg: #f8f9ff; --card: #ffffff; --text: #1e1b4b; --light: #64748b;
      --dark: #0f0f1a; --dark-card: #1e1b4b; --border: rgba(99,91,255,0.15);
    }

    * { margin:0; padding:0; box-sizing:border-box; }
    body { font-family:'Inter',sans-serif; background:var(--bg); color:var(--text); line-height:1.6; padding-top:80px; }

    /* ==================== NAVBAR ==================== */
    .navbar {
      position:fixed; top:0; left:0; right:0; z-index:1000;
      background:var(--gradient)!important; padding:0.9rem 0;
      box-shadow:0 8px 32px rgba(99,91,255,0.25);
    }
    .navbar .container { max-width:1400px; display:flex; align-items:center; justify-content:space-between; }
    .navbar-brand { font-weight:900; font-size:1.9rem; background:var(--gradient); -webkit-background-clip:text; -webkit-text-fill-color:transparent; display:flex; align-items:center; gap:0.5rem; }
    .navbar-brand i { font-size:2.6rem; }
    .nav-link { color:white!important; font-weight:600; padding:0.6rem 1.2rem!important; border-radius:8px; transition:0.3s; }
    .nav-link:hover { background:rgba(255,255,255,0.15); }
    .btn-started { background:white!important; color:var(--primary)!important; font-weight:700; padding:0.7rem 2rem!important; border-radius:50px; box-shadow:0 8px 20px rgba(0,0,0,0.15); }

    /* ==================== MAIN CONTAINER ==================== */
    .main-wrapper { max-width:1400px; margin:0 auto; padding:0 1rem; }

    /* ==================== BUTTONS ==================== */
    .btn-primary-custom, .btn-auth-primary, .btn-view-plan, .btn-back-chat {
      background:var(--gradient); border:none; color:white; border-radius:16px;
      padding:1rem 2.4rem; font-weight:700; font-size:1.1rem; transition:all 0.3s;
      box-shadow:0 10px 25px rgba(99,91,255,0.35);
    }
    .btn-primary-custom:hover, .btn-auth-primary:hover, .btn-view-plan:hover, .btn-back-chat:hover {
      transform:translateY(-5px); box-shadow:0 18px 40px rgba(99,91,255,0.5);
    }

    /* ==================== HERO SECTION ==================== */
    .hero-section { min-height:100vh; display:flex; align-items:center; padding:4rem 0; }
    .hero-title { font-size:4.5rem; font-weight:900; line-height:1.1; margin-bottom:1.5rem;
      background:var(--gradient); -webkit-background-clip:text; -webkit-text-fill-color:transparent;
    }
    .hero-subtitle { font-size:1.35rem; color:var(--light); max-width:650px; margin-bottom:3rem; }

    /* ==================== CARDS ==================== */
    .feature-card, .auth-card, .summary-card, .week-card, .chat-card, .info-card, .sidebar-card, .plan-card {
      background:var(--card); border-radius:24px; padding:2rem; height:100%;
      box-shadow:0 12px 35px rgba(99,91,255,0.12); border:1px solid var(--border);
      transition:transform 0.4s, box-shadow 0.4s;
    }
    .feature-card:hover, .week-card:hover { transform:translateY(-12px); box-shadow:0 25px 50px rgba(99,91,255,0.25); }

    /* ==================== AUTH PAGES ==================== */
    .auth-section { min-height:100vh; display:flex; align-items:center; justify-content:center; padding:3rem 1rem; }
    .auth-card { max-width:460px; width:100%; }
    .auth-header { background:var(--gradient); color:white; padding:4rem 2rem 3rem; text-align:center; border-radius:24px 24px 0 0; }
    .auth-icon { font-size:5rem; margin-bottom:1rem; }
    .auth-title { font-size:2.2rem; font-weight:800; margin-bottom:0.5rem; }
    .auth-subtitle { font-size:1.1rem; opacity:0.95; }
    .auth-body { padding:3rem; }
    .input-group-custom { position:relative; margin-bottom:1.8rem; }
    .input-icon { position:absolute; left:1.2rem; top:50%; transform:translateY(-50%); font-size:1.4rem; color:var(--light); z-index:5; }
    .form-control-custom {
      height:62px; padding-left:3.8rem; border-radius:18px; border:2px solid #e2e8f0;
      font-size:1.05rem; width:100%; transition:all 0.3s;
    }
    .form-control-custom:focus { border-color:var(--primary); box-shadow:0 0 0 5px rgba(99,91,255,0.2); }

    /* ==================== DASHBOARD & CHAT ==================== */
    .dashboard-layout { min-height:calc(100vh - 80px); padding:2rem 0; }
    .chat-messages {
      height:540px; overflow-y:auto; padding:2rem; border-radius:20px; margin:1.5rem 0;
      background:radial-gradient(circle at top left,#1e293b,#020617 60%);
      box-shadow:inset 0 10px 30px rgba(0,0,0,0.4);
    }
    .message-row { margin-bottom:1.5rem; display:flex; }
    .user-message { justify-content:flex-end; }
    .bot-message { justify-content:flex-start; }
    .message-bubble {
      max-width:78%; padding:14px 20px; border-radius:20px; box-shadow:0 6px 18px rgba(0,0,0,0.25);
    }
    .bubble-user { background:var(--gradient); color:white; border-bottom-right-radius:6px; }
    .bubble-bot { background:#111827; color:#e5e7eb; border:1px solid #2d3748; border-bottom-left-radius:6px; }
    .message-sender { font-size:0.8rem; font-weight:600; opacity:0.8; margin-bottom:6px; display:block; }

    /* Chat Input */
    .chat-input-form { padding:1.5rem; background:rgba(255,255,255,0.05); border-radius:20px; }
    .chat-input { height:58px; border-radius:50px; border:2px solid #e2e8f0; padding:0 1.5rem; font-size:1rem; }
    .btn-send { height:58px; width:58px; border-radius:50%; background:var(--gradient); color:white; }

    /* ==================== RESPONSIVE ==================== */
    @media (max-width:1200px) { .hero-title{font-size:4rem;} }
    @media (max-width:992px) { .hero-title{font-size:3.5rem;} .chat-messages{height:480px;} }
    @media (max-width:768px) {
      .hero-title{font-size:2.9rem;} .navbar-brand{font-size:1.6rem;}
      .navbar-brand i{font-size:2.2rem;} .auth-card{max-width:100%; margin:1rem;}
      .dashboard-layout .row > * { margin-bottom:2rem; }
    }
    @media (max-width:576px) {
      .hero-title{font-size:2.6rem;} .auth-header{padding:3rem 1.5rem;}
      .auth-body{padding:2rem;} .chat-messages{height:400px; padding:1rem;}
    }
  </style>
</head>
<body>

  <!-- Navbar -->
  <nav class="navbar navbar-expand-lg">
    <div class="container">
      <a class="navbar-brand" href="{{ url_for('index') }}"><i class='bx bxs-graduation'></i> LearnPath</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav ms-auto align-items-center gap-3">
          {% if user %}
            <li class="nav-item"><a class="nav-link" href="{{ url_for('dashboard') }}">Dashboard</a></li>
            <li class="nav-item"><a class="nav-link" href="{{ url_for('logout') }}">Logout</a></li>
          {% else %}
            <li class="nav-item"><a class="nav-link" href="{{ url_for('login') }}">Login</a></li>
            <li class="nav-item"><a class="nav-link btn-started" href="{{ url_for('register') }}">Get Started</a></li>
          {% endif %}
        </ul>
      </div>
    </div>
  </nav>

  <!-- Main Content -->
  <div class="main-wrapper">
    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        <div class="my-4">
          {% for category, msg in messages %}
            <div class="alert alert-{{category}} alert-dismissible fade show rounded-4 shadow-sm" role="alert">
              {{ msg }}
              <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
            </div>
          {% endfor %}
        </div>
      {% endif %}
    {% endwith %}

    {% block content %}{% endblock %}
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  {% block extra_js %}{% endblock %}
</body>
</html>